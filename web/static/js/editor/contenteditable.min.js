function import$(t,e){var n={}.hasOwnProperty;for(var r in e)n.call(e,r)&&(t[r]=e[r]);return t}var lc,json0,transport,tp;lc={active:null},document.addEventListener("click",function(t){var e,n;if(e=ld$.parent(t.target,"[editable]"),lc.active!==e&&(lc.active&&lc.active.setAttribute("contenteditable",!1),lc.active=e,e))return e.setAttribute("contenteditable",!0),ld$.find(e,"[editable]").map(function(t){return t.setAttribute("contenteditable",!1)}),n=caretRange({node:e,x:t.clientX,y:t.clientY}),setCaret(n.range)}),json0=require("ot-json0"),(transport=function(t){var e=this;return null==t&&(t={}),this.opt=t,this.root=t.root,this.output=t.output,this.state={old:{},cur:{},tree:{}},this.root.addEventListener("input",debounce(500,function(){return e.update()})),this}).prototype=import$(Object.create(Object.prototype),{update:function(){var t,e,n=this;return t=Date.now(),e=serialize(this.root),this.state.old=this.state.cur,this.state.cur=e,e=json0OtDiff(this.state.old,this.state.cur),e=json0.type.apply(this.state.tree,e),deserialize(this.state.tree).then(function(e){var r,i;return r=e.node,n.output.innerHTML="",n.output.appendChild(r),i=Date.now(),console.log("elapsed: ",i-t)})}}),(tp=new transport({root:ld$.find("#input",0),output:ld$.find("#output",0)})).update();