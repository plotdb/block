function import$(e,n){var t={}.hasOwnProperty;for(var r in n)t.call(n,r)&&(e[r]=n[r]);return e}var dragging,draggingCaret,draggingSrc,ghost,dragBox,node,draggingRender;dragging=!1,draggingCaret=null,draggingSrc=null,(ghost=new Image).src="data:image/svg+xml,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="20" height="15" viewBox="0 0 20 15">\n  <rect x="0" y="0" width="20" height="15" fill="rgba(0,0,0,.5)"/>\n</svg>'),ld$.find("[draggable]").map(function(e){return e.setAttribute("draggable",!0),e.addEventListener("dragstart",function(n){return console.log(e),draggingSrc=e,n.dataTransfer.setData("application/json",JSON.stringify({})),n.dataTransfer.setDragImage(ghost,10,10),dragging=!0,n.stopPropagation()})}),ld$.find("[editable]").map(function(e){return e.addEventListener("drop",function(e){return JSON.parse(e.dataTransfer.getData("application/json")),dragging=!1,e.preventDefault()}),e.addEventListener("dragover",function(e){return e.preventDefault()})}),import$((dragBox=document.createElement("div")).style,{position:"fixed",left:0,top:0,opacity:0,border:"2px solid #f0f",pointerEvents:"none",transition:"opacity .15s ease-in-out"}),document.body.appendChild(dragBox),node=ld$.find("#input",0),document.addEventListener("drop",function(e){var n,t,r,a;if((n=draggingSrc)&&draggingCaret&&(t=draggingCaret.startContainer,r=draggingCaret.startOffset,a=t.nodeType===Element.TEXT_NODE?t:t.childNodes[r],!ld$.parent(a,null,n)))return n.parentNode.removeChild(n),a.parentNode.insertBefore(n,a),draggingRender(null)}),draggingRender=function(e){var n,t;return draggingCaret=e,e?(t=e.getBoundingClientRect(),import$(dragBox.style,{left:t.x+"px",top:t.y+"px",width:"1px",height:t.height+"px",opacity:1})):(n=dragBox.style,n.opacity=0,n)},document.addEventListener("dragover",function(e){var n;if(dragging)return n=caretRange({node:node,x:e.clientX,y:e.clientY}),draggingRender(n.range)});