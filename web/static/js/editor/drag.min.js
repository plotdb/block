function import$(t,e){var r={}.hasOwnProperty;for(var n in e)r.call(e,n)&&(t[n]=e[n]);return t}var dragging,draggingCaret,draggingSrc,ghost,dropInit,dragInit,dragBox,node,draggingRender;dragging=!1,draggingCaret=null,draggingSrc=null,(ghost=new Image).src="data:image/svg+xml,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="20" height="15" viewBox="0 0 20 15">\n  <rect x="0" y="0" width="20" height="15" fill="rgba(0,0,0,.5)"/>\n</svg>'),dropInit=function(t){if(!t.dropInited)return t.dropInited=!0,t.addEventListener("drop",function(t){return JSON.parse(t.dataTransfer.getData("application/json")),dragging=!1,t.preventDefault()}),t.addEventListener("dragover",function(t){return t.preventDefault()})},dragInit=function(t){if(!t.dragInited)return t.dragInited=!0,t.setAttribute("draggable",!0),t.addEventListener("dragstart",function(e){return draggingSrc=t,e.dataTransfer.setData("application/json",JSON.stringify({})),e.dataTransfer.setDragImage(ghost,10,10),dragging=!0,e.stopPropagation()})},document.addEventListener("dragover",function(t){var e;for(e=t.target;e&&(!e.getAttribute||!e.hasAttribute("editable"));)e=e.parentNode;if(e)return dropInit(e)}),document.addEventListener("mousedown",function(t){var e;for(e=t.target;e&&(!e.getAttribute||!e.hasAttribute("draggable"));)e=e.parentNode;if(e)return dragInit(e)}),ld$.find("[draggable]").map(function(t){return dragInit(t)}),ld$.find("[editable]").map(function(t){return dropInit(t)}),import$((dragBox=document.createElement("div")).style,{position:"fixed",left:0,top:0,opacity:0,border:"2px solid #f0f",pointerEvents:"none",transition:"opacity .15s ease-in-out"}),document.body.appendChild(dragBox),node=ld$.find("#editor1",0),document.addEventListener("drop",function(t){var e,r,n,a;if((e=draggingSrc)&&draggingCaret&&(r=draggingCaret.startContainer,n=draggingCaret.startOffset,a=r.nodeType===Element.TEXT_NODE?r:r.childNodes[n],!ld$.parent(a,null,e)))return e.parentNode.removeChild(e),a.parentNode.insertBefore(e,a),draggingRender(null)}),draggingRender=function(t){var e,r;return draggingCaret=t,t?(r=t.getBoundingClientRect(),import$(dragBox.style,{left:r.x+"px",top:r.y+"px",width:"1px",height:r.height+"px",opacity:1})):(e=dragBox.style,e.opacity=0,e)},document.addEventListener("dragover",function(t){var e;if(dragging)return e=caretRange({node:node,x:t.clientX,y:t.clientY}),draggingRender(e.range)});