function import$(e,t){var n={}.hasOwnProperty;for(var r in t)n.call(t,r)&&(e[r]=t[r]);return e}var dragging,draggingCaret,draggingSrc,ghost,dropInit,dragInit,dragBox,node,draggingRender;dragging=!1,draggingCaret=null,draggingSrc=null,(ghost=new Image).src="data:image/svg+xml,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="20" height="15" viewBox="0 0 20 15">\n  <rect x="0" y="0" width="20" height="15" fill="rgba(0,0,0,.5)"/>\n</svg>'),dropInit=function(e){if(!e.dropInited)return e.dropInited=!0,e.addEventListener("drop",function(e){return JSON.parse(e.dataTransfer.getData("application/json")),dragging=!1,e.preventDefault()}),e.addEventListener("dragover",function(e){return e.preventDefault()})},dragInit=function(e){if(!e.dragInited)return e.dragInited=!0,e.setAttribute("draggable",!0),e.addEventListener("dragstart",function(t){return draggingSrc=e,t.dataTransfer.setData("application/json",JSON.stringify({})),t.dataTransfer.setDragImage(ghost,10,10),dragging=!0,t.stopPropagation()})},document.addEventListener("dragover",function(e){var t;for(t=e.target;t&&(!t.getAttribute||!t.hasAttribute("editable"));)t=t.parentNode;if(t)return dropInit(t)}),document.addEventListener("mousedown",function(e){var t;for(t=e.target;t&&(!t.getAttribute||!t.hasAttribute("draggable"));)t=t.parentNode;if(t)return dragInit(t)}),ld$.find("[draggable]").map(function(e){return dragInit(e)}),ld$.find("[editable]").map(function(e){return dropInit(e)}),import$((dragBox=document.createElement("div")).style,{position:"fixed",left:0,top:0,opacity:0,border:"2px solid #f0f",pointerEvents:"none",transition:"opacity .15s ease-in-out",animation:"blink .4s linear infinite"}),document.body.appendChild(dragBox),node=ld$.find("#editor1",0),document.addEventListener("drop",function(e){var t,n,r,a,i;if((t=draggingSrc)&&draggingCaret&&(n=draggingCaret.startContainer,r=draggingCaret.startOffset,draggingRender(null),a=n.nodeType===Element.TEXT_NODE?n:n.childNodes[r],!ld$.parent(a,null,t)))return a.nodeType===Element.TEXT_NODE?(t.parentNode.removeChild(t),i=a.textContent,[document.createTextNode(i.substring(0,r)),t,document.createTextNode(i.substring(r))].map(function(e){return a.parentNode.insertBefore(e,a)}),a.parentNode.removeChild(a)):(t.parentNode.removeChild(t),a.parentNode.insertBefore(t,a))}),draggingRender=function(e){var t,n;return draggingCaret=e,e?(n=e.getBoundingClientRect(),import$(dragBox.style,{left:n.x+"px",top:n.y+"px",width:"1px",height:n.height+"px",display:"block",opacity:1})):(t=dragBox.style,t.display="none",t.opacity=0,t)},document.addEventListener("dragover",function(e){var t;if(dragging)return t=caretRange({node:node,x:e.clientX,y:e.clientY}),draggingRender(t.range)});