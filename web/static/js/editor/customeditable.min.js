var getCaretRangeText,setVrcaret,range;getCaretRangeText=function(e){var t,n,r,a,i,c,o,g,d,l,u,p,s,h;for(t=e.node,n=e.x,r=e.y,(a=e.range)||(a=document.createRange()),c=(i=[-1,void 0])[0],o=i[1],g=0,d=t.length+1;g<d;++g)l=g,a.setStart(t,l),p=(u=a.getBoundingClientRect()).x+u.width/2,s=u.y+u.height/2,h=Math.pow(p-n,2)+Math.pow(s-r,2),(null==o||h<o)&&(c=(i=[l,h])[0],o=i[1]);return a.setStart(t,c),a.setEnd(t,c+2),a},setVrcaret=function(e,t){var n,r;return t.getBoundingClientRect(),n=e.getBoundingClientRect(),r=vrcaret.style,r.left=n.x+"px",r.top=n.y+"px",r.height=n.height+"px",r.width="1px",r},ld$.find("[customeditable=true]").map(function(e){return e.addEventListener("click",function(e){return console.log("ok",e.clientX,e.clientY)})}),ld$.find("#mask",0).addEventListener("click",function(e){var t;return t=getCaretRangeText({node:pp.childNodes[0],x:e.clientX,y:e.clientY}),setVrcaret(t,pp)}),range=getCaretRangeText({node:pp.childNodes[0],x:985,y:146}),console.log(range),setVrcaret(range,pp);