function import$(t,e){var i={}.hasOwnProperty;for(var n in e)i.call(e,n)&&(t[n]=e[n]);return t}var highlight,hlh;(highlight=function(t){return null==t&&(t={}),this.opt=t,this.box=null,this.tgt=null,this.menu=t.menu,this.target=t.target,this.targets=[],this.addTarget(t.target),this}).prototype=import$(Object.create(Object.prototype),{addTarget:function(t){var e;return e=(Array.isArray(t)?t:[t]).map(function(t){return"string"==typeof t?document.querySelector(t):t||null}).filter(function(t){return t}),this.targets=this.targets.concat(e)},isToggled:function(){return this.toggled},toggle:function(t,e){var i,n,r,o,h;return this.toggled=t=null!=t?t:!this.isToggled(),t?(n=this.menu.getBoundingClientRect(),i=this.menu.style,i.opacity=1,i.pointerEvents="auto",i.left=((r=(h=e.clientX-n.width/2)>0?h:0)<(o=window.innerWidth-n.width)?r:o)+"px",i.top=((r=(h=e.clientY-n.height/2)>0?h:0)<(o=window.innerHeight-n.height)?r:o)+"px",i):(i=this.menu.style,i.opacity=0,i.pointerEvents="none",i)},mode:function(t){var e;return e="highlight-"+t,this.box.style.animation=e+" 1s infinite",this.blend.style.opacity="edit"===t?1:0,this.mask.style.opacity="edit"===t?1:0},poll:function(){var t=this;return this.render(this.tgt),setTimeout(function(){return t.poll()},500)},init:function(){var t,e=this;return setInterval(function(){return e.render(e.tgt)},500),this.box=document.createElement("div"),this.blend=document.createElement("div"),this.mask=document.createElement("div"),this.tgt=null,import$(this.mask.style,{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(255,255,255,.8)",mixBlendMode:"hard-light",zIndex:5,pointerEvents:"none",opacity:0,transition:"opacity .15s ease-in-out"}),t={position:"fixed",top:0,left:0,zIndex:9999,pointerEvents:"none",opacity:0,transition:"all .15s ease-in-out"},import$(this.box.style,t),import$(this.blend.style,t),document.body.appendChild(this.box),document.body.appendChild(this.mask),this.mask.appendChild(this.blend),this.mode("hover"),document.addEventListener("mouseover",function(t){var i,n,r,o;if(!e.isToggled())for(i=0,n=e.targets.length;i<n;++i)if(r=i,ld$.parent(t.target,null,e.targets[r])){if(!(o=ld$.parent(t.target,"[editable]",e.targets[r])))return;e.render(o);break}}),document.addEventListener("click",function(t){return e.toggle(!1)}),document.addEventListener("contextmenu",function(t){return e.toggle(!0,t),t.preventDefault()}),this.view=new ldView({root:this.menu,action:{click:{"highlight-delete":function(){var t,i;if((t=e.tgt)&&t.parentNode)return(i=t.previousSibling||t.parentNode).hasAttribute("editable")||(i=null),t.parentNode.removeChild(t),e.tgt=i,e.render(i)},"highlight-clone":function(){var t,i;if((t=e.tgt)&&t.parentNode)return i=t.cloneNode(!0),t.parentNode.insertBefore(i,t.nextSibling),e.tgt=i,e.render(i)}}}}),this.poll()},update:function(){return this.render(this.tgt)},render:function(t){var e,i;return this.tgt=t,t?(e=t.getBoundingClientRect(),6,i={left:e.x-6+"px",top:e.y-6+"px",width:e.width+12+"px",height:e.height+12+"px",opacity:.5,border:"3px solid #2be",borderRadius:"5px"},import$(this.box.style,i),import$(this.blend.style,{left:e.x+"px",top:e.y+"px",width:e.width+"px",height:e.height+"px",opacity:1,border:"3px solid transparent",background:"#999"})):(this.box.style.opacity=0,void(this.blend.style.opacity=0))}}),hlh=new highlight({target:ld$.find(".editor"),menu:ld$.find("[ld-scope=highlight]",0)}),editor.setHighlight(hlh),hlh.init();