function import$(n,r){var t={}.hasOwnProperty;for(var o in r)t.call(r,o)&&(n[o]=r[o]);return n}var felib,lm,module;console.log("init"),(felib=function(){return this.scope={},this}).prototype=import$(Object.create(Object.prototype),{context:function(n,r){var t,o,e,i,s,u,d,l,c,a,p=[];for(t=[],o=[],e=0,i=(n=Array.isArray(n)?n:[n]).length;e<i;++e){s=e,d=(u=[{},this.scope[n[s]]||{}])[0],l=u[1];for(c in l)d[c]=window[c],window[c]=l[c];t.push(d),o.push(l)}for(r(),e=o.length-1;e>=0;--e){a=[],l=o[s=e],d=t[s];for(c in l)a.push(window[c]=d[c]);p.push(a)}return p},load:function(n){var r,t=this;return n=Array.isArray(n)?n:[n],r={},new Promise(function(o,e){var i;return(i=function(n,e){var s,u,d,l;for(s=[],u=e,d=n.length;u<d&&(l=u,s.push(n[l]),null==n[l].async||n[l].async);++u);return s.length?Promise.all(s.map(function(n){return t._load(n.url||n).then(function(n){return import$(r,n)})})).then(function(){return t.context(s.map(function(n){return n.url||n}),function(){return i(n,e+s.length)})}):o(r)})(n,0)})},_load:function(n){var r=this;return new Promise(function(t,o){var e,i,s,u,d;e=document.createElement("script"),i={};for(s in u=window)d=u[s],i[s]=d;return e.onerror=function(){return o()},e.onload=function(){var o,e,s;r.scope[n]=o={};for(e in s=window)s[e],null==i[e]&&null!=window[e]&&(o[e]=window[e],window[e]=void 0);return t(o)},e.setAttribute("src",n),document.body.appendChild(e)})}}),module={lib:[{url:"https://d3js.org/d3.v4.js",async:!1},"https://d3js.org/d3-format.v2.min.js","https://d3js.org/d3-array.v2.min.js","https://d3js.org/topojson.v2.min.js",{url:"https://d3js.org/d3-color.v1.min.js",async:!1},"https://d3js.org/d3-interpolate.v1.min.js","https://d3js.org/d3-scale-chromatic.v1.min.js","https://d3js.org/d3-dispatch.v2.min.js","https://d3js.org/d3-quadtree.v2.min.js","https://d3js.org/d3-timer.v2.min.js","https://d3js.org/d3-force.v2.min.js"]},(lm=new felib).load(module.lib).then(function(n){return console.log("loaded",n)});