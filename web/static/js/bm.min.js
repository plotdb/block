function import$(e,t){var r={}.hasOwnProperty;for(var n in t)r.call(t,n)&&(e[n]=t[n]);return e}var deserialize,nodeToJson,serialize,serializeHtmlCode,resolveRequiredPackages,blockInstance,block,bm;deserialize=function(e){var t,r,n,o,i;if("text"===e.type)return document.createTextNode(e.value);if("block"===e.type)return deserialize(e.tree);for(t=document.createElement(e.name),e.attr.filter(function(e){return e&&e[0]}).map(function(e){return t.setAttribute(e[0],e[1])}),e.style.filter(function(e){return e&&e[0]}).map(function(e){return t.style[e[0]]=e[1]}),e.cls&&e.cls.length&&t.classList.add.apply(t.classList,e.cls.filter(function(e){return e})),r=0,o=(n=e.child||[]).length;r<o;++r)(i=deserialize(n[r]))&&t.appendChild(i);return t},nodeToJson=function(e){var t,r,n,o,i,l;return"#text"===(t=e.nodeName.toLowerCase())?{type:"text",value:e.nodeValue}:(r=e.style?function(){var t,r,o=[];for(t=0,r=e.style.length;t<r;++t)n=t,o.push(n);return o}().map(function(t){return[e.style[t],e.style[e.style[t]]]}):[],o=e.attributes?function(){var t,r,n,o=[];for(t=0,n=(r=e.attributes).length;t<n;++t)i=r[t],o.push([i.nodeName,i.nodeValue]);return o}().filter(function(e){var t;return!("style"===(t=e[0])||"class"===t)}):[],l=e.classList?function(){var t,r,n,o=[];for(t=0,n=(r=e.classList).length;t<n;++t)i=r[t],o.push(i);return o}():[],{type:"tag",name:t,style:r,attr:o,cls:l})},serialize=function(e){var t,r,n,o,i,l;if(t=nodeToJson(e),r=[],e.childNodes){for(n=0,o=e.childNodes.length;n<o;++n)i=n,l=serialize(e.childNodes[i]),r.push(l);return t.child=r,t}},serializeHtmlCode=function(e){var t;return t=document.createElement("div"),t.innerHTML=e,serialize(t)},resolveRequiredPackages=function(e){var t,r,n,o,i;for(t=[],"block"===e.type&&t.push({name:e.name,version:e.version}),r=0,o=(n=e.child).length;r<o;++r)i=n[r],t=t.concat(resolveRequiredPackages(i));return t},(blockInstance=function(e){return null==e&&(e={}),this.opt=e,this.block=e.block,this}).prototype=import$(Object.create(Object.prototype),{getDom:function(){return deserialize(this.block.obj)}}),(block=function(e){return this.opt=e,this.name=e.name,this.version=e.version,this.raw=e.raw,this.obj=serializeHtmlCode(e.raw),this}).prototype=import$(Object.create(Object.prototype),{getDom:function(){return deserialize(this.obj)},create:function(){return new blockInstance({block:this})}}),(bm={cache:{},reload:function(e){return this.get(e,!0)},get:function(e,t){var r,n,o=this;return null==t&&(t=!1),r={},e=Array.isArray(e)?e:[e],n=e.map(function(e){return Promise.resolve().then(function(){var t,n,i,l;return(t=o.cache[e])?Promise.resolve(t):(n=e.split("@"),i=n[0],l=n[1],ld$.fetch("/blocks/"+i+"/index.html",{method:"GET"},{type:"text"}).then(function(t){return r[i]=o.cache[e]=new block({raw:t,name:i,version:l})}))})}),Promise.all(n).then(function(){return r})}}).get(["list@0.0.1","quiz@0.0.1"]).then(function(e){var t,r,n;for(console.log("ok1",e),t=0;t<10;++t)t,n=(r=e.list.create()).getDom(),document.body.appendChild(n);return r=resolveRequiredPackages(e.list.obj),console.log(r),bm.reload(["list@0.0.1"])}).then(function(){return console.log("ok2")}).catch(function(e){return console.log(e)});